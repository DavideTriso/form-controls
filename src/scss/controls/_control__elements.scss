//-----------------------
// ELEMENTS
//----------------------

.control__box {
  display : flex;
  @include flexPositioning((flexWrap: nowrap, justifyContent: flex-start, alignItems: stretch));
  @include sizes((width: 100%));
  position: relative;
}

.control__field {
  @include background($control__field--background);
  @include border($control__field--border);
  box-shadow: $control__field--box-shadow;
  flex      : 0 1 100%;
  @include font($control__field--font);
  @include text($control__field--text);
  @include sizes($control__field--sizes);
  @include padding($control__field--padding);

  &:active,
  &:focus {
    @include border($control__fieldPfocus--border);
    @include outline($control__fieldPfocus--outline);
  }

  &:disabled {
    @include border($control__fieldPdisabled--border);
    @include background($control__fieldPdisabled--background);
  }
}

.control__textarea {
  @include background($control__textarea--background);
  @include border($control__textarea--border);
  box-shadow: $control__textarea--box-shadow;
  flex      : 0 1 100%;
  @include font($control__textarea--font);
  @include text($control__textarea--text);
  @include sizes($control__textarea--sizes);
  @include padding($control__textarea--padding);

  &:active,
  &:focus {
    @include border($control__textareaPfocus--border);
    @include outline($control__textareaPfocus--outline);
  }

  &:disabled {
    @include border($control__textareaPdisabled--border);
    @include background($control__textareaPdisabled--background);
  }
}

.control__select {
  @include sizes($control__select--sizes);
  position: relative;

  &:after {
    position        : absolute;
    right           : 0.5rem;
    top             : 50%;
    transform       : translateY(-50%) rotate(45deg);
    pointer-events  : none;
    content         : "";
    width           : 0.8rem;
    height          : 0.8rem;
    background-color: black;
    display         : block;
    /* @TODO: implement arrow with external module */
  }

  > select {
    -webkit-appearance: none;
    -moz-appearance   : none;
    appearance        : none;
    @include background($control__select--background);
    @include border($control__select--border);
    box-shadow        : $control__select--box-shadow;
    flex              : 0 1 100%;
    @include font($control__select--font);
    @include text($control__select--text);
    @include sizes($control__select--sizes);
    @include padding($control__select--padding);

    &:active,
    &:focus {
      @include border($control__selectPfocus--border);
      @include outline($control__selectPfocus--outline);
    }

    &:disabled {
      @include border($control__selectPdisabled--border);
      @include background($control__selectPdisabled--background);
    }
  }
}

.control__checkbox {
  display   : block;
  width     : 1rem;
  height    : 1rem;
  background: black;
}

.control__radio {
  display      : block;
  width        : 1rem;
  height       : 1rem;
  background   : black;
  border-radius: 50%;
}

.control__choice {
  @include border($control__choice--border);
  box-shadow: $control__choice--box-shadow;
  @include background($control__choice--background);
  @include font($control__choice--font);
  display   : flex;
  flex      : 0 1 100%;
  @include padding($control__choice--padding);
  @include text($control__choice--text);
  transition: $control__choice--transition;

  .control__field_sronly[type="radio"]:focus + &,
  .control__field_sronly[type="checkbox"]:focus + &,
  &:hover {
    @include border($control__choicePhover--border);
    box-shadow: $control__choicePhover--box-shadow;
    @include background($control__choicePhover--background);
    @include font($control__choicePhover--font);
    @include text($control__choicePhover--text);
    @include padding($control__choicePhover--padding);
    transform : $control__choicePhover--transform;
  }

  .control__field_sronly[type="radio"]:focus + &,
  .control__field_sronly[type="checkbox"]:focus + & {
    @include outline($control__choicePfocus--outline);
  }

  .control__field_sronly[type="radio"]:checked + &,
  .control__field_sronly[type="checkbox"]:checked + & {
    @include border($control__choicePchecked--border);
    box-shadow: $control__choicePchecked--box-shadow;
    @include background($control__choicePchecked--background);
    @include font($control__choicePchecked--font);
    @include text($control__choicePchecked--text);
    @include padding($control__choicePchecked--padding);
    transform : $control__choicePchecked--transform;
  }
}

.control__spinnbutton {
  display : flex;
  @include flexPositioning((flexWrap: nowrap, justifyContent: flex-start, alignItems: stretch));
  @include sizes((width: 100%));
  position: relative;
}

.control__label {
  flex: 0 1 100%;
  @include font($control__label--font);
  @include text($control__label--text);
  @include padding($control__label--padding);
}

.control__abbrflag {
  @include font($control__abbrflag--font);
  @include text($control__abbrflag--text);
  @include typography($control__abbrflag--typography);
}

.control__optionalflag {
  @include font($control__optionalflag--font);
  @include text($control__optionalflag--text);
}

.control__requiredflag {
  @include font($control__requiredflag--font);
  @include text($control__requiredflag--text);
}

.control__addon {
  flex: 0 0 auto;
}

.control__feedbackwrapper {
  position: relative;
  @include sizes((width: 100%, height: 0));
  z-index : zIndex(level1);
}

.control__feedback {
  @include background($control__feedback--background);
  @include border($control__feedback--border);
  box-shadow: $control__feedback--box-shadow;
  @include font($control__feedback--font);
  display   : block;
  position  : absolute;
  opacity   : 0;
  top       : 0;
  left      : 50%;
  transform : $control__feedback--transform;
  transition: $control__feedback--transition;
  @include margin($control__feedback--margin);
  @include padding($control__feedback--padding);
  @include sizes((width: auto, maxWidth: 90%));
  @include text($control__feedback--text);
  visibility: hidden;
  z-index   : zIndex(alert);

  &:after {
    content  : "";
    display  : block;
    bottom   : 0;
    left     : 50%;
    position : absolute;
    @include sizes($control__feedbackPafter--sizes);
    transform: translate(-50%, 55%) rotate(-45deg);
    @include background($control__feedback--background);
    @include border(map-merge($control__feedback--border, (borderRadius: 0, borderTopWidth: 0, borderRightWidth: 0, borderTopRightRadius: 100%)));
  }
}
