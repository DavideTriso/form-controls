!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery,window)}(function(n,t){"use strict";var s="numberSpinner",u="aria-controls";n(t);function a(t,e){var i=this;i.settings=n.extend({},n.fn[s].defaultSettings,e),i.element=n(t),i.subtractBtn=i.element.find("."+i.settings.subtractBtnClass)||null,i.sumBtn=i.element.find("."+i.settings.sumBtnClass)||null,i.inputField=i.element.find("."+i.settings.inputFieldClass),i.inputFieldVal=parseInt(i.inputField.val())||0,i.init()}n.extend(a.prototype,{init:function(){var t,e,i,a=this,l=a.settings,n=(t=a.inputField,e=a.inputFieldIdPrefix,i=0,t.is("[id]")||t.attr("id",e+i),t.attr("id"));a.calculateMinAndMax(),null!==a.subtractBtn&&(a.subtractBtn.attr(u,n),a.subtractBtn.on("click."+s,function(t){a.subtract(t)})),null!==a.sumBtn&&(a.sumBtn.attr(u,n),a.sumBtn.on("click."+s,function(t){a.sum(t)})),a.inputField.on("change."+s,function(t){var e=a.inputFieldVal,i=parseInt(a.inputField.val())||0,n="sum";i<l.min?(a.inputFieldVal=l.min,a.element.trigger("corrected."+s)):i>l.max?(a.inputFieldVal=l.max,a.element.trigger("corrected."+s)):a.inputFieldVal=i,e>a.inputFieldVal&&(n="subtract"),a.inputField.val(a.inputFieldVal),a.element.trigger("changed."+s,[n,a.inputFieldVal-e])})},calculateMinAndMax:function(){if("function"==typeof this.settings.min){var t=parseInt(this.settings.min(this.element),10)||0;this.settings.min=t}if("function"==typeof this.settings.max){var e=parseInt(this.settings.max(this.element),10)||9999;this.settings.max=e}},updateRange:function(t){var e=this;"object"==typeof t&&("number"==typeof t.min&&(e.settings.min=t.min,e.inputField.attr("min",t.min)),"number"==typeof t.max&&(e.settings.max=t.max,e.inputField.attr("max",t.max)))},subtract:function(t){var e=this,i=e.settings,n=t.shiftKey?i.bigOffset:i.defaultOffset,a=e.inputFieldVal-n;a<i.min?(e.inputField.val(i.min),e.inputFieldVal=i.min,n=0,e.element.trigger("corrected."+s)):a>i.max?(e.inputField.val(i.max),e.inputFieldVal=i.max,n=0,e.element.trigger("corrected."+s)):(e.inputField.val(a),e.inputFieldVal=a),e.element.trigger("changed."+s,["subtract",-n])},sum:function(t){var e=this,i=e.settings,n=t.shiftKey?i.bigOffset:i.defaultOffset,a=e.inputFieldVal+n;a>i.max?(e.inputField.val(i.max),e.inputFieldVal=i.max,n=0,e.element.trigger("corrected."+s)):a<i.min?(e.inputField.val(i.min),e.inputFieldVal=i.min,n=0,e.element.trigger("corrected."+s)):(e.inputField.val(a),e.inputFieldVal=a),e.element.trigger("changed."+s,["sum",n])},set:function(t){var e=this,i=e.settings;if(!(t>=i.min&&t<=i.max))throw new Error("The value is out of the allowed range.");e.inputFieldVal=t,e.inputField.val(e.inputFieldVal),e.element.trigger("set."+s)},reset:function(){var t=this;t.inputFieldVal=t.settings.min,t.inputField.val(t.inputFieldVal),t.element.trigger("reset."+s)},disableOrEnable:function(t){if("boolean"==typeof t){var e=this,i=t?"disabled":"enabled";e.inputField.prop("disabled",t),null!==e.sumBtn&&e.sumBtn.prop("disabled",t),null!==e.subtractBtn&&e.subtractBtn.prop("disabled",t),e.element.trigger(i+"."+s)}},methodCaller:function(t,e){var i=this;switch(t){case"reset":i.reset();break;case"set":i.set(e);break;case"updateRange":i.updateRange(e);break;case"disable":i.disableOrEnable(!0);break;case"enable":i.disableOrEnable(!1)}}}),n.fn[s]=function(e,i){return this.each(function(){var t=this;n.data(t,"plugin_"+s)||"object"!=typeof e&&void 0!==e?"string"==typeof e&&n.data(t,"plugin_"+s).methodCaller(e,i):n.data(t,"plugin_"+s,new a(t,e))})},n.fn[s].defaultSettings={subtractBtnClass:"js--numberSpinner__subtract",sumBtnClass:"js--numberSpinner__sum",inputFieldClass:"js--numberSpinner__input",inputFieldIdPrefix:"inputSpinner",defaultOffset:1,bigOffset:10,min:0,max:100}});