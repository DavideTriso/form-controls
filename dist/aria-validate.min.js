!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window)}(function(l,e){"use strict";var d="ariaValidate",i="role",n="aria-hidden",o="aria-live",f="aria-relevant",u="aria-atomic",c="aria-errormessage",r="aria-invalid",m="aria-owns",v="data-ariavalidate-value",g="true",a="false",h=0,b=l(e);function C(e,t,r){return r=void 0!==r?r:"",e.is("[id]")||e.attr("id",t+r),e.attr("id")}function s(e,t){return t?l.extend({},e,t):e}function p(e,t){for(var r=e.split(" "),a=r.length,s="",i=0;i<a;i++)s=s+" "+r[i]+"."+t;return String(s)}function x(e,t,r){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(3===(e=e.split(r)).length){if(2===e[0].length&&2===e[1].length&&4===e[2].length)return"dmy"===t?e=e[2]+"-"+e[1]+"-"+e[0]:"mdy"===t&&(e=e[2]+"-"+e[0]+"-"+e[1]),e;if(4===e[0].length&&2===e[1].length&&2===e[2].length&&"ymd"===t)return e=e[0]+"-"+e[1]+"-"+e[2]}return!1}function y(e,t,r){if(e.bindToElement){var a=e.offset||0;return s=x(s=""!==(s=e.bindToElement.attr(v)||e.bindToElement.val())?s:e.fallbackDate,t,r),s=(s=new Date(s)).setDate(s.getDate()+a)}var s=e.attr(v)||e.val();return x(e,t,r)}function _(e){if(e.element){var t=e.offset||0;return(e=""!==e.element.attr(v)?e.element.attr(v).length:e.element.val().length)+t}return e=e.attr(v).length||e.val().length}function V(e){if(e.element){var t=e.offset||0;return e=e.element.attr(v)||e.element.val(),parseFloat(e,10)+t}return e=e.attr(v)||e.val(),parseFloat(e,10)}function E(e,t){var r=this;r.element=l(e),r.userSettings=t,r.behaviour=r.userSettings.behaviour,r.classes=s(l.fn[d].defaultClasses,r.userSettings.classes),r.regionSettings=s(l.fn[d].defaultRegionSettings,r.userSettings.regionSettings),r.fieldStatus=void 0,r.isDirty=!1,r.errorMsgs=s(l.fn[d].defaultErrorMsgs,r.userSettings.errorMsgs),r.successMsg=r.userSettings.successMsg?r.userSettings.successMsg:l.fn[d].defaultSuccessMsg,r.eventListeners=[],r.selectElements(),r.initMarkup(),r.manageDirty(),r.addBehaviour(),r.updateFieldValue()}l.extend(E.prototype,{selectElements:function(){var e=this,t=e.classes,r=e.element;if(e.field=r.find("."+t.fieldClass),e.label=r.find("."+t.labelClass),e.alertbox=1===r.find("."+t.alertboxClass).length&&r.find("."+t.alertboxClass),e.successbox=1===r.find("."+t.successboxClass).length&&r.find("."+t.successboxClass),e.fakeField=!1!==t.fieldClassElement&&r.find(t.fieldClassElement),1===e.field.length)e.fieldTag=e.field.prop("tagName"),e.fieldType="INPUT"===e.fieldTag&&e.field.attr("type"),e.fieldName=e.userSettings.fieldName||e.field.attr("name");else{if(!(1<e.field.length&&"radio"===e.field.first().attr("type")))throw new Error("There is something wrong with your markup");e.fieldTag="INPUT",e.fieldType="radio",e.fieldName=e.userSettings.fieldName||l(e.field[0]).attr("name")}},initMarkup:function(){var r=this,a=C(r.element,r.classes.controlIdPrefix,h),s="",e=!1!==r.alertbox&&C(r.alertbox,a+"__alertbox"),t=!1!==r.successbox&&C(r.successbox,a+"__successbox");"radio"!==r.fieldType?(s=C(r.field,a+"__input"),r.label.is('[for="'+s+'"]')||r.label.attr("for",s)):(s=[],r.field.each(function(e){var t=l(this);s.push(C(t,a+"__input-"+e)),t.is('[for="'+s[e]+'"]')||l(r.label[e]).attr("for",s[e])})),r.alertbox&&(r.field.attr(c,e),r.alertbox.attr(i,"alert").attr(o,"assertive").attr(f,"additions text").attr(u,g).attr(n,g)),r.successbox&&(r.field.attr(m,t),r.successbox.attr(o,"polite").attr(f,"additions text").attr(u,g).attr(n,g)),b.trigger(d+".markupInitialised",[r]),h+=1},manageDirty:function(){var e=this,t=e.fieldType,r="blur";"SELECT"!==e.fieldTag&&"color"!==t&&"range"!==t||(r="change"),e.field.one(r+".dirty."+d,function(){e.isDirty=!0,b.trigger(d+".markedAsDirty",[e])})},addBehaviour:function(){for(var e=this.behaviour,t=e.length,r=0;r<t;r++)this.bindEventListeners(e[r]);b.trigger(d+".behaviourAdded",[this])},bindEventListeners:function(e){for(var t=this,r=p(e.event,d),a=e.validate||!1,s=e.main||!1,i=e.dirty,l=r.trim().split(" "),n=l.length,o=0;o<n;o++)t.eventListeners.push(l[o]);t.field.on(r,function(e){a&&t.performValidation(a,s,i)})},unbindEventListeners:function(e){var t=(e=p(e,d)).trim().split(" "),r=t.length;this.field.off(e);for(var a=0;a<r;a++)this.eventListeners.splice(this.eventListeners.indexOf(t[a]),1);b.trigger(d+".eventListenersRemoved",[this])},updateFieldValue:function(){var e=this;if("checkbox"===e.fieldType)e.fieldValue=e.field.prop("checked");else if("radio"===e.fieldType)e.fieldValue=1===e.field.filter(":checked").length&&e.field.filter(":checked").val();else{var t=void 0!==e.fieldValue?e.fieldLength:void 0;e.fieldValue=e.field.val()||"",e.fieldLength=e.fieldValue.length,t<e.fieldValue.length?e.adding=!0:e.adding=!1}e.field.attr(v,e.fieldValue)},performValidation:function(e,t,r){var a=this;if(a.updateFieldValue(),void 0===r||!(r&&!a.isDirty||!r&&a.isDirty)){for(var s in e){var i=l.fn[d].validateFunctions[s](a.fieldValue,e[s],a.regionSettings);if(!0!==i)return a.fieldStatus=i,void a.invalidateControl()}a.fieldStatus=!0,t?a.validateControl():a.resetControl()}},invalidateControl:function(){var e=this,t=e.classes;e.element.removeClass(t.controlValidClass).addClass(t.controlErrorClass),e.field.attr(r,g).removeClass(t.fieldValidClass).addClass(t.fieldErrorClass),e.fakeField&&e.fakeField.removeClass(t.fieldValidClass).addClass(t.fieldErrorClass),e.label.removeClass(t.labelValidClass).addClass(t.labelErrorClass),e.successbox&&e.successbox.attr(n,g).removeClass(t.successboxVisibleClass),e.alertbox&&!0!==e.fieldStatus&&e.alertbox.html(e.errorMsgs[e.fieldStatus]).attr(n,a).addClass(t.alertboxVisibleClass),b.trigger(d+".isInvalid",[e])},validateControl:function(){var e=this,t=e.classes;e.element.removeClass(t.controlErrorClass).addClass(t.controlValidClass),e.field.attr(r,a).removeClass(t.fieldErrorClass).addClass(t.fieldValidClass),e.fakeField&&e.fakeField.removeClass(t.fieldErrorClass).addClass(t.fieldValidClass),e.label.removeClass(t.labelErrorClass).addClass(t.labelValidClass),e.alertbox&&e.alertbox.attr(n,g).removeClass(t.alertboxVisibleClass),e.successbox&&!1!==e.successMsg&&e.successbox.html(e.successMsg).attr(n,a).addClass(t.successboxVisibleClass),b.trigger(d+".isValid",[e])},resetControl:function(){var e=this,t=e.classes;e.element.removeClass(t.controlErrorClass).removeClass(t.controlValidClass),e.field.removeAttr(r).removeClass(t.fieldErrorClass).removeClass(t.fieldValidClass),e.fakeField&&e.fakeField.removeClass(t.fieldErrorClass).removeClass(t.fieldValidClass),e.label.removeClass(t.labelErrorClass).removeClass(t.labelValidClass),e.alertbox&&e.alertbox.attr(n,g).removeClass(t.alertboxVisibleClass),e.successbox&&!1!==e.successMsg&&e.successbox.attr(n,g).removeClass(t.successboxVisibleClass),b.trigger(d+".resetted",[e])},destroy:function(){var e=this;e.field.off(e.eventListeners.join(" ")),e.resetControl(),e.field.removeAttr(c).removeAttr(m).removeAttr(v),e.alertbox.removeAttr(i).removeAttr(o).removeAttr(f).removeAttr(u).removeAttr(n),e.successbox&&e.successbox.removeAttr(o).removeAttr(f).removeAttr(u).removeAttr(n),e.element.removeData("plugin_"+d)},methodCaller:function(e,t){var r=this;switch(e){case"updateFieldValue":r.updateFieldValue();break;case"unbindEventListeners":r.unbindEventListeners(t);break;case"setDirty":r.isDirty=!0;break;case"destroy":r.destroy();break;case"invalidateControl":r.invalidateControl();break;case"validateControl":r.validateControl();break;case"resetControl":r.resetControl()}}}),l.fn[d]=function(e,t){return this.each(function(){l.data(this,"plugin_"+d)||"object"!=typeof e&&void 0!==e?"string"==typeof e&&l.data(this,"plugin_"+d).methodCaller(e,t):l.data(this,"plugin_"+d,new E(this,e))})},l.fn[d].defaultClasses={controlIdPrefix:"control--",controlValidClass:"control_success",controlErrorClass:"control_error",fieldClass:"control__field",fieldErrorClass:"control__field_error",fieldValidClass:"control__field_valid",fieldClassElement:!1,labelClass:"control__label",labelErrorClass:"control__label_error",labelValidClass:"control__label_valid",alertboxClass:"control__feedback_error",successboxClass:"control__feedback_valid",alertboxVisibleClass:"control__feedback_visible",successboxVisibleClass:"control__feedback_visible"},l.fn[d].defaultRegionSettings={dateFormat:"dmy",dateSeparator:"/",timeFormat:"24",timeSeparator:":",decimalSeparator:","},l.fn[d].defaultErrorMsgs={letters:"Digits are not allowed in this field",onlyLetters:"Only letters are allowed",digits:"Letters are not allowed in this field",onlyDigits:"Only digits are allowed",int:"Enter a whole number (e.g. 12)",float:"Enter a number (e.g. 12.168 or 16)",bool:"You must check this checkbox",date:"Not a valid date",time:"Not a valid time",minDate:"The date entered is too far in the past",maxDate:"The date entered is too far in the future",email:"Enter a valid email address",password:"Password is not secure",min:"The entered number is too small",max:"The entered number is too big",minLength:"The length of the input is too short",maxLength:"Field length exceeds the maximum number of chars allowed",required:"This field is required to successfully complete the form",tokens:"Please choose a value from the list",match:"No match",customRegex:'Regex match returned "false"',ajax:"server says no!",ajaxError:"Server error."},l.fn[d].defaultSuccessMsg="Perfect! You told us exactly what we wanted to know!",l.fn[d].validateFunctions={letters:function(e){return!!/^[\D]*$/.test(e)||"letters"},onlyLetters:function(e){return!!/^[a-zA-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ]*$/.test(e)||"onlyLetters"},digits:function(e){return!!/^[^a-zA-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ]*$/.test(e)||"digits"},onlyDigits:function(e){return!!/^[\d]*$/.test(e)||"onlyDigits"},int:function(e){return""===e||(e=parseInt(e,10),!!Number.isInteger(e)||"int")},float:function(e,t,r){if(""===e)return!0;var a=r,s=e.split("."),i=e.split(",");return 2<s.length&&"."===a||2<i.length&&","===a?"float":(","===a&&(e=e.replace(/,/,".")),!isNaN(e-parseFloat(e))||"float")},bool:function(e){return!!e||"bool"},date:function(e,t,r){if(!1===(e=x(e,r.dateFormat,r.dateSeparator)))return"date";if(""===e)return!0;var a=new Date(e);return!isNaN(a.getTime())||"date"},time:function(e,t,r){return""===e||((e=function(e,t,r,a){if(2!==(e=e.split(r)).length)return!1;if("12"===t)if("function"==typeof a)a=a();else if("object"==typeof a)a=a.attr(v)||a.val();else{if(!(e[1].length<=5||4<=e[1].length))return!1;a=("am"===(a=e[1].slice(-2).toLowerCase())||"pm"===a)&&a,e[1]=e[1].slice(0,2)}if(!1===/^\d{2}$/.test(e[0])||!1===/^\d{2}$/.test(e[1]))return!1;if(e[0]=parseInt(e[0],10),"12"===t){if(!a||"am"===a&&12===e[0]||"pm"===a&&0===e[0]||12<e[0])return!1;"pm"===a&&e[0]<12&&(e[0]=e[0]+12)}return e[0]+":"+e[1]}(e,r.timeFormat,r.timeSeparator,t))&&2===(e=e.split(":")).length&&parseInt(e[0],10)<24&&parseInt(e[1],10)<60||"time")},minDate:function(e,t,r){return""===e||("function"==typeof t?t=t():"object"==typeof t&&(t=y(t,r.dateFormat,r.dateSeparator)),e=x(e,r.dateFormat,r.dateSeparator),new Date(e)>=new Date(t)||"minDate")},maxDate:function(e,t,r){return""===e||("function"==typeof t?t=t():"object"==typeof t&&(t=y(t,r.dateFormat,r.dateSeparator)),e=x(e,r.dateFormat,r.dateSeparator),new Date(e)<=new Date(t)||"maxDate")},minTime:function(e,t,r){},maxTime:function(e,t,r){},email:function(e,t){return!!/^([\w-\.]+@([\w\-]+\.)+[\w\-]{2,4})?$/.test(e)||"email"},password:function(e){return!!/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*\.\,\;\:\\\-\|\-\/\(\)\{\}\[\]])(?=.{8,100})/.test(e)||"password"},min:function(e,t){if(""===e)return!0;"function"==typeof t?t=t():"object"==typeof t&&(t=V(t));var r=parseFloat(e,10);return t<=r||(""===r||"min")},max:function(e,t){if(""===e)return!0;"function"==typeof t?t=t():"object"==typeof t&&(t=V(t));var r=parseFloat(e,10);return r<=t||(""===r||"max")},minLength:function(e,t){"function"==typeof t?t=t():"object"==typeof t&&(t=_(t));var r=e.length;return t<=r||(0===r||"minLength")},maxLength:function(e,t){"function"==typeof t?t=t():"object"==typeof t&&(t=_(t));var r=e.length;return r<=t||(0===r||"maxLength")},required:function(e,t){return"function"==typeof t&&!t()||0<e.length||"required"},tokens:function(e,t){"function"==typeof t&&(t=t());for(var r=t.length,a=0;a<r;a++)if(t[a]===e)return!0;return"tokens"},matchMain:function(e,t){var r="";return""===(r="function"==typeof t?t():t.attr(v)||t.val())||(e===r||"match")},match:function(e,t){return e===("function"==typeof t?t():t.attr(v)||t.val())||"match"},customRegex:function(e,t){return!!t.test(e)||"customRegex"},ajax:function(e,t){l.ajax({method:"POST",url:t,data:e}).done(function(e){return!0===e||"ajax"}).fail(function(){return b.trigger(d+".ajaxError",t),"ajaxError"})}}});