!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window)}(function(e,t){"use strict";function a(e,t,a){return a=void 0!==a?a:"",e.is("[id]")||e.attr("id",t+a),e.attr("id")}function r(t,a){return a?e.extend({},t,a):t}function s(e,t){for(var a=e.split(" "),r=a.length,s="",i=0;i<r;i++)s=s+" "+a[i]+"."+t;return String(s)}function i(e,t,a){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(3===(e=e.split(a)).length){if(2===e[0].length&&2===e[1].length&&4===e[2].length)return"dmy"===t?e=e[2]+"-"+e[1]+"-"+e[0]:"mdy"===t&&(e=e[2]+"-"+e[0]+"-"+e[1]),e;if(4===e[0].length&&2===e[1].length&&2===e[2].length&&"ymd"===t)return e=e[0]+"-"+e[1]+"-"+e[2]}return!1}function l(e,t,a){if(e.bindToElement){var r=e.offset||0;return s=""!==(s=e.bindToElement.attr(u.dV)||e.bindToElement.val())?s:e.fallbackDate,s=i(s,t,a),s=new Date(s),s=s.setDate(s.getDate()+r)}var s=e.attr(u.dV)||e.val();return i(e,t,a)}function n(e){if(e.element){var t=e.offset||0;return(e=""!==e.element.attr(u.dV)?e.element.attr(u.dV).length:e.element.val().length)+t}return e=e.attr(u.dV).length||e.val().length}function o(e){if(e.element){var t=e.offset||0;return e=e.element.attr(u.dV)||e.element.val(),parseFloat(e,10)+t}return e=e.attr(u.dV)||e.val(),parseFloat(e,10)}function d(t,a){var s=this;s.element=e(t),s.userSettings=a,s.behaviour=s.userSettings.behaviour,s.classes=r(e.fn[f].defaultClasses,s.userSettings.classes),s.regionSettings=r(e.fn[f].defaultRegionSettings,s.userSettings.regionSettings),s.fieldStatus=void 0,s.isDirty=!1,s.errorMsgs=r(e.fn[f].defaultErrorMsgs,s.userSettings.errorMsgs),s.successMsg=s.userSettings.successMsg?s.userSettings.successMsg:e.fn[f].defaultSuccessMsg,s.eventListeners=[],s.selectElements(),s.initMarkup(),s.manageDirty(),s.addBehaviour(),s.updateFieldValue()}var f="ariaValidate",u={r:"role",aHi:"aria-hidden",aLi:"aria-live",aRe:"aria-relevant",aAt:"aria-atomic",aErM:"aria-errormessage",aInv:"aria-invalid",aOw:"aria-owns",req:"required",dV:"data-ariavalidate-value",t:"true",f:"false"},c=0,h=e(t);e.extend(d.prototype,{selectElements:function(){var t=this,a=t.classes,r=t.element;if(t.field=r.find("."+a.fieldClass),t.label=r.find("."+a.labelClass),t.alertbox=1===r.find("."+a.alertboxClass).length&&r.find("."+a.alertboxClass),t.successbox=1===r.find("."+a.successboxClass).length&&r.find("."+a.successboxClass),t.fakeField=!1!==a.fieldClassElement&&r.find(a.fieldClassElement),1===t.field.length)t.fieldTag=t.field.prop("tagName"),t.fieldType="INPUT"===t.fieldTag&&t.field.attr("type"),t.fieldName=t.userSettings.fieldName||t.field.attr("name");else{if(!(t.field.length>1&&"radio"===t.field.first().attr("type")))throw new Error("There is something wrong with your markup");t.fieldTag="INPUT",t.fieldType="radio",t.fieldName=t.userSettings.fieldName||e(t.field[0]).attr("name")}},initMarkup:function(){var t=this,r=a(t.element,t.classes.controlIdPrefix,c),s="",i=!1!==t.alertbox&&a(t.alertbox,r+"__alertbox"),l=!1!==t.successbox&&a(t.successbox,r+"__successbox");"radio"!==t.fieldType?(s=a(t.field,r+"__input"),t.label.is('[for="'+s+'"]')||t.label.attr("for",s)):(s=[],t.field.each(function(i){var l=e(this);s.push(a(l,r+"__input-"+i)),l.is('[for="'+s[i]+'"]')||e(t.label[i]).attr("for",s[i])})),t.alertbox&&(t.field.attr(u.aErM,i),t.alertbox.attr(u.r,"alert").attr(u.aLi,"assertive").attr(u.aRe,"additions text").attr(u.aAt,u.t).attr(u.aHi,u.t)),t.successbox&&(t.field.attr(u.aOw,l),t.successbox.attr(u.aLi,"polite").attr(u.aRe,"additions text").attr(u.aAt,u.t).attr(u.aHi,u.t)),h.trigger(f+".markupInitialised",[t]),c+=1},manageDirty:function(){var e=this,t=e.fieldType,a="blur";"SELECT"!==e.fieldTag&&"color"!==t&&"range"!==t||(a="change"),e.field.one(a+".dirty."+f,function(){e.isDirty=!0,h.trigger(f+".markedAsDirty",[e])})},addBehaviour:function(){for(var e=this.behaviour,t=e.length,a=0;a<t;a++)this.bindEventListeners(e[a]);h.trigger(f+".behaviourAdded",[this])},bindEventListeners:function(e){for(var t=this,a=s(e.event,f),r=e.validate||!1,i=e.main||!1,l=e.dirty,n=a.trim().split(" "),o=n.length,d=0;d<o;d++)t.eventListeners.push(n[d]);t.field.on(a,function(e){r&&t.performValidation(r,i,l)})},unbindEventListeners:function(e){var t=(e=s(e,f)).trim().split(" "),a=t.length;this.field.off(e);for(var r=0;r<a;r++)this.eventListeners.splice(this.eventListeners.indexOf(t[r]),1);h.trigger(f+".eventListenersRemoved",[this])},updateFieldValue:function(){var e=this;if("checkbox"===e.fieldType)e.fieldValue=e.field.prop("checked");else if("radio"===e.fieldType)e.fieldValue=1===e.field.filter(":checked").length&&e.field.filter(":checked").val();else{var t=void 0!==e.fieldValue?e.fieldLength:void 0;e.fieldValue=e.field.val()||"",e.fieldLength=e.fieldValue.length,t<e.fieldValue.length?e.adding=!0:e.adding=!1}e.field.attr(u.dV,e.fieldValue)},performValidation:function(t,a,r){if(this.updateFieldValue(),void 0===r||!(r&&!this.isDirty||!r&&this.isDirty)){for(var s in t){var i=e.fn[f].validateFunctions[s](this.fieldValue,t[s],this.regionSettings);if(!0!==i)return this.fieldStatus=i,void this.invalidateControl()}this.fieldStatus=!0,a?this.validateControl():this.resetControl()}},invalidateControl:function(){var e=this.classes;this.element.removeClass(e.controlValidClass).addClass(e.controlErrorClass),this.field.attr(u.aInv,u.t).removeClass(e.fieldValidClass).addClass(e.fieldErrorClass),this.fakeField&&this.fakeField.removeClass(e.fieldValidClass).addClass(e.fieldErrorClass),this.label.removeClass(e.labelValidClass).addClass(e.labelErrorClass),this.successbox&&this.successbox.attr(u.aHi,u.t).removeClass(e.successboxVisibleClass),this.alertbox&&!0!==this.fieldStatus&&this.alertbox.html(this.errorMsgs[this.fieldStatus]).attr(u.aHi,u.f).addClass(e.alertboxVisibleClass),h.trigger(f+".isInvalid",[this])},validateControl:function(){var e=this.classes;this.element.removeClass(e.controlErrorClass).addClass(e.controlValidClass),this.field.attr(u.aInv,u.f).removeClass(e.fieldErrorClass).addClass(e.fieldValidClass),this.fakeField&&this.fakeField.removeClass(e.fieldErrorClass).addClass(e.fieldValidClass),this.label.removeClass(e.labelErrorClass).addClass(e.labelValidClass),this.alertbox&&this.alertbox.attr(u.aHi,u.t).removeClass(e.alertboxVisibleClass),this.successbox&&!1!==this.successMsg&&this.successbox.html(this.successMsg).attr(u.aHi,u.f).addClass(e.successboxVisibleClass),h.trigger(f+".isValid",[this])},resetControl:function(){var e=this.classes;this.element.removeClass(e.controlErrorClass).removeClass(e.controlValidClass),this.field.removeAttr(u.aInv).removeClass(e.fieldErrorClass).removeClass(e.fieldValidClass),this.fakeField&&this.fakeField.removeClass(e.fieldErrorClass).removeClass(e.fieldValidClass),this.label.removeClass(e.labelErrorClass).removeClass(e.labelValidClass),this.alertbox&&this.alertbox.attr(u.aHi,u.t).removeClass(e.alertboxVisibleClass),this.successbox&&!1!==this.successMsg&&this.successbox.attr(u.aHi,u.t).removeClass(e.successboxVisibleClass),h.trigger(f+".resetted",[this])},destroy:function(){this.field.off(this.eventListeners.join(" ")),this.resetControl(),this.field.removeAttr(u.aErM).removeAttr(u.aOw).removeAttr(u.dV),this.alertbox.removeAttr(u.r).removeAttr(u.aLi).removeAttr(u.aRe).removeAttr(u.aAt).removeAttr(u.aHi),this.successbox&&this.successbox.removeAttr(u.aLi).removeAttr(u.aRe).removeAttr(u.aAt).removeAttr(u.aHi),this.element.removeData("plugin_"+f)},methodCaller:function(e,t){switch(e){case"updateFieldValue":this.updateFieldValue();break;case"unbindEventListeners":this.unbindEventListeners(t);break;case"setDirty":this.isDirty=!0;break;case"destroy":this.destroy();break;case"invalidateControl":this.invalidateControl();break;case"validateControl":this.validateControl();break;case"resetControl":this.resetControl()}}}),e.fn[f]=function(t,a){return this.each(function(){e.data(this,"plugin_"+f)||"object"!=typeof t&&void 0!==t?"string"==typeof t&&e.data(this,"plugin_"+f).methodCaller(t,a):e.data(this,"plugin_"+f,new d(this,t))})},e.fn[f].defaultClasses={controlIdPrefix:"control--",controlValidClass:"control_success",controlErrorClass:"control_error",fieldClass:"control__field",fieldErrorClass:"control__field_error",fieldValidClass:"control__field_valid",fieldClassElement:!1,labelClass:"control__label",labelErrorClass:"control__label_error",labelValidClass:"control__label_valid",alertboxClass:"control__feedback_error",successboxClass:"control__feedback_valid",alertboxVisibleClass:"control__feedback_visible",successboxVisibleClass:"control__feedback_visible"},e.fn[f].defaultRegionSettings={dateFormat:"dmy",dateSeparator:"/",timeFormat:"24",timeSeparator:":",decimalSeparator:","},e.fn[f].defaultErrorMsgs={letters:"Digits are not allowed in this field",onlyLetters:"Only letters are allowed",digits:"Letters are not allowed in this field",onlyDigits:"Only digits are allowed",int:"Enter a whole number (e.g. 12)",float:"Enter a number (e.g. 12.168 or 16)",bool:"You must check this checkbox",date:"Not a valid date",time:"Not a valid time",minDate:"The date entered is too far in the past",maxDate:"The date entered is too far in the future",email:"Enter a valid email address",password:"Password is not secure",min:"The entered number is too small",max:"The entered number is too big",minLength:"The length of the input is too short",maxLength:"Field length exceeds the maximum number of chars allowed",required:"This field is required to successfully complete the form",tokens:"Please choose a value from the list",match:"No match",customRegex:'Regex match returned "false"',ajax:"server says no!",ajaxError:"Server error."},e.fn[f].defaultSuccessMsg="Perfect! You told us exactly what we wanted to know!",e.fn[f].validateFunctions={letters:function(e){return!!/^[\D]*$/.test(e)||"letters"},onlyLetters:function(e){return!!/^[a-zA-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ]*$/.test(e)||"onlyLetters"},digits:function(e){return!!/^[^a-zA-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏàáâãäåæçèéêëìíîïÐÑÒÓÔÕÖØÙÚÛÜÝÞßðñòóôõöøùúûüýþÿ]*$/.test(e)||"digits"},onlyDigits:function(e){return!!/^[\d]*$/.test(e)||"onlyDigits"},int:function(e){return""===e||(e=parseInt(e,10),!!Number.isInteger(e)||"int")},float:function(e,t,a){if(""===e)return!0;var r=a,s=e.split("."),i=e.split(",");return s.length>2&&"."===r||i.length>2&&","===r?"float":(","===r&&(e=e.replace(/,/,".")),!isNaN(e-parseFloat(e))||"float")},bool:function(e){return!!e||"bool"},date:function(e,t,a){if(!1===(e=i(e,a.dateFormat,a.dateSeparator)))return"date";if(""!==e){var r=new Date(e);return!isNaN(r.getTime())||"date"}return!0},time:function(e,t,a){return""===e||((e=function(e,t,a,r){if(2!==(e=e.split(a)).length)return!1;if("12"===t)if("function"==typeof r)r=r();else if("object"==typeof r)r=r.attr(u.dV)||r.val();else{if(!(e[1].length<=5||e[1].length>=4))return!1;r=("am"===(r=e[1].slice(-2).toLowerCase())||"pm"===r)&&r,e[1]=e[1].slice(0,2)}if(!1===/^\d{2}$/.test(e[0])||!1===/^\d{2}$/.test(e[1]))return!1;if(e[0]=parseInt(e[0],10),"12"===t){if(!r||"am"===r&&12===e[0]||"pm"===r&&0===e[0]||e[0]>12)return!1;"pm"===r&&e[0]<12&&(e[0]=e[0]+12)}return e[0]+":"+e[1]}(e,a.timeFormat,a.timeSeparator,t))?2===(e=e.split(":")).length&&parseInt(e[0],10)<24&&parseInt(e[1],10)<60||"time":"time")},minDate:function(e,t,a){return""===e||("function"==typeof t?t=t():"object"==typeof t&&(t=l(t,a.dateFormat,a.dateSeparator)),e=i(e,a.dateFormat,a.dateSeparator),new Date(e)>=new Date(t)||"minDate")},maxDate:function(e,t,a){return""===e||("function"==typeof t?t=t():"object"==typeof t&&(t=l(t,a.dateFormat,a.dateSeparator)),e=i(e,a.dateFormat,a.dateSeparator),new Date(e)<=new Date(t)||"maxDate")},minTime:function(e,t,a){},maxTime:function(e,t,a){},email:function(e,t){return!!/^([\w-\.]+@([\w\-]+\.)+[\w\-]{2,4})?$/.test(e)||"email"},password:function(e){return!!/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*\.\,\;\:\\\-\|\-\/\(\)\{\}\[\]])(?=.{8,100})/.test(e)||"password"},min:function(e,t){if(""===e)return!0;"function"==typeof t?t=t():"object"==typeof t&&(t=o(t));var a=parseFloat(e,10);return a>=t||(""===a||"min")},max:function(e,t){if(""===e)return!0;"function"==typeof t?t=t():"object"==typeof t&&(t=o(t));var a=parseFloat(e,10);return a<=t||(""===a||"max")},minLength:function(e,t){"function"==typeof t?t=t():"object"==typeof t&&(t=n(t));var a=e.length;return a>=t||(0===a||"minLength")},maxLength:function(e,t){"function"==typeof t?t=t():"object"==typeof t&&(t=n(t));var a=e.length;return a<=t||(0===a||"maxLength")},required:function(e,t){return"function"==typeof t?!t()||(e.length>0||"required"):e.length>0||"required"},tokens:function(e,t){"function"==typeof t&&(t=t());for(var a=t.length,r=0;r<a;r++)if(t[r]===e)return!0;return"tokens"},matchMain:function(e,t){var a="";return""===(a="function"==typeof t?t():t.attr(u.dV)||t.val())||e===a||"match"},match:function(e,t){var a="";return a="function"==typeof t?t():t.attr(u.dV)||t.val(),e===a||"match"},customRegex:function(e,t){return!!t.test(e)||"customRegex"},ajax:function(t,a){e.ajax({method:"POST",url:a,data:t}).done(function(e){return 1==e||"ajax"}).fail(function(){return h.trigger(f+".ajaxError",a),"ajaxError"})}}});